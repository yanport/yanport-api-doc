get:
  tags:
    - Indicateurs sur les biens (ancien/neuf)
  summary: 'Zone fiable'
  description: >-
    Permet de construire une zone géographique où les indicateurs sur les biens sont fiables.
  parameters:
    - name: marketingType
      in: query
      description: Type de marché (vente, location, rente viagère).
      schema:
        type: string
        enum:
          - SALE
          - RENT
          - LIFE_ANNUITY
      required: true
    - name: propertyType
      in: query
      description: Type de bien (maison, appartement, terrain, parking, immeuble, local).
      schema:
        type: string
        enum:
          - HOUSE
          - APARTMENT
          - LAND
          - PARKING
          - BUILDING
          - PREMISES
      required: true
    - name: agglomerationId
      in: query
      description: Identifiant de l'agglomération. Requis si `zone=AGGLOMERATION`.
      schema:
        type: integer
        format: int64
    - name: cityId
      in: query
      description: Identifiant de la ville. Requis si `zone=CITY`.
      schema:
        type: integer
        format: int64
    - name: irisId
      in: query
      description: Identifiant de l'iris. Requis si `zone=IRIS`.
      schema:
        type: string
    - name: zone
      in: query
      description: Type de zone (iris, ville, agglomération).
      schema:
        type: string
        enum:
          - IRIS
          - CITY
          - AGGLOMERATION
    - $ref: ../components/parameters/roomCounts.yaml
    - $ref: ../components/parameters/newBuild.yaml
    - name: intervalUnit
      in: query
      description: Unité de temps minimale de l'intervalle.
      schema:
        type: string
        default: MONTHS
        enum:
          - MONTHS
          - QUARTERS
          - YEARS
    - name: dateMin
      in: query
      description: Date minimale pour le calcul de l'évolution (YYYY-mm-dd).
      schema:
        type: string
        format: date
    - name: dateMax
      in: query
      description: Date maximale pour le calcul de l'évolution (YYYY-mm-dd).
      schema:
        type: string
        format: date
    - name: source
      in: query
      description: Source des biens.
      schema:
        type: string
        enum:
          - AD
          - CLAMEUR
          - DVF
    - name: field
      in: query
      description: Champ sur lequel sont calculés les statistiques.
      schema:
        type: string
        default: PRICE_M2
        enum:
          - PRICE_M2
  responses:
    '200':
      description: Zone fiable
      content:
        application/json:
          schema:
            $ref: ../components/schemas/ReliableZone.yaml
    '400':
      $ref: ../components/responses/BadRequest.yaml
    '500':
      $ref: ../components/responses/InternalServerError.yaml
