get:
  tags:
    - Indicateurs sur les biens (ancien/neuf)
  summary: 'Zone fiable'
  description: >-
    Permet de construire une zone géographique où les indicateurs sur les biens sont fiables.

    Voir notre [article](https://www.yanport.com/blog/posts/etude-de-marche-a-ladresse) pour plus de détails.

    ### Exemple
      #### Zone fiable pour les appartements à vendre autour de la Goutte d’Or (Paris 18ème)
        /properties/evolution/reliable-zone?propertyTypes=APARTMENT&marketingType=SALE&agglomerationId=4762789834677248&cityId=52421209&irisId=751062402&dateMin=2021-01-01T00:00:00&dateMax=2021-12-31T00:00:00&source=AD
  parameters:
    - $ref: ../components/parameters/marketingType.yaml
    - name: propertyTypes
      in: query
      description: Types de bien (maison, appartement, terrain, parking, immeuble, local)
      style: form
      schema:
        type: array
        items:
          type: string
          enum:
            - HOUSE
            - APARTMENT
            - PREMISES
            - LAND
            - BUILDING
            - PARKING
      required: true
    - name: agglomerationId
      in: query
      description: Identifiant de l'agglomération. Requis si `zones` contient `AGGLOMERATION`.
      schema:
        type: integer
        format: int64
    - name: cityId
      in: query
      description: Identifiant de la ville. Requis si `zones` contient `CITY`.
      schema:
        type: integer
        format: int64
    - name: irisId
      in: query
      description: Identifiant de l'iris. Requis si `zones` contient `IRIS`.
      schema:
        type: string
    - name: zones
      in: query
      description: Types de zone (iris, ville, agglomération)
      style: form
      schema:
        type: array
        items:
          type: string
          enum:
            - IRIS
            - CITY
            - AGGLOMERATION
    - $ref: ../components/parameters/roomCounts.yaml
    - $ref: ../components/parameters/newBuild.yaml
    - name: intervalUnits
      in: query
      description: Unités de temps de l'intervalle (mois, trimestres, années)
      style: form
      schema:
        type: array
        items:
          type: string
          enum:
            - MONTHS
            - QUARTERS
            - YEARS
    - name: dateMin
      in: query
      description: Date minimale pour le calcul de l'évolution (YYYY-mm-dd)
      schema:
        type: string
        format: date
    - name: dateMax
      in: query
      description: Date maximale pour le calcul de l'évolution (YYYY-mm-dd)
      schema:
        type: string
        format: date
    - name: source
      in: query
      description: Source des biens
      schema:
        type: string
        enum:
          - AD
          - CLAMEUR
          - DVF
    - name: field
      in: query
      description: Champ sur lequel sont calculées les statistiques
      schema:
        type: string
        default: PRICE_M2
        enum:
          - PRICE_M2
  responses:
    '200':
      description: Zone fiable
      content:
        application/json:
          schema:
            $ref: ../components/schemas/ReliableZone.yaml
    '400':
      $ref: ../components/responses/BadRequest.yaml
    '500':
      $ref: ../components/responses/InternalServerError.yaml
